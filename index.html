<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lingoung Bank</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #000;
            color: #fff;
            min-height: 100vh;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            min-height: 90vh;
        }
        
        .logo {
            text-align: center;
            margin: 30px 0;
            font-size: 28px;
            font-weight: bold;
            color: #9c27b0;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: #9c27b0;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #7b1fa2;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: transparent;
            color: #9c27b0;
            border: 2px solid #9c27b0;
        }
        
        .btn-secondary:hover {
            background-color: rgba(156, 39, 176, 0.1);
            transform: translateY(-2px);
        }
        
        .card {
            background-color: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .balance {
            font-size: 36px;
            font-weight: bold;
            margin: 20px 0;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #aaa;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #333;
            border-radius: 8px;
            background-color: #222;
            color: white;
            margin-bottom: 5px;
        }
        
        .hidden {
            display: none;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .modal-content {
            background-color: #1a1a1a;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 4px 20px rgba(156, 39, 176, 0.3);
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .nav-item {
            color: #aaa;
            padding: 10px 15px;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: #9c27b0;
            border-bottom: 2px solid #9c27b0;
            margin-bottom: -1px;
        }
        
        .transaction-history {
            margin-top: 20px;
        }
        
        .transaction {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        
        .transaction-amount.positive {
            color: #4caf50;
        }
        
        .transaction-amount.negative {
            color: #f44336;
        }
        
        .logout-btn {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }
        
        .error {
            color: #f44336;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="container">
        <div class="logo">Lingoung Bank</div>
        <button id="register-btn" class="btn btn-primary">Register</button>
        <button id="login-btn" class="btn btn-secondary">Login</button>
    </div>
    
    <!-- Registration Screen -->
    <div id="register-screen" class="container hidden">
        <div class="logo">Create Account</div>
        <div class="card">
            <div class="form-group">
                <label for="reg-name">Full Name</label>
                <input type="text" id="reg-name" placeholder="Enter your name">
                <div id="reg-name-error" class="error">Please enter your name</div>
            </div>
            <div class="form-group">
                <label for="reg-email">Email</label>
                <input type="email" id="reg-email" placeholder="Enter your email">
                <div id="reg-email-error" class="error">Please enter a valid email</div>
            </div>
            <div class="form-group">
                <label for="reg-password">Password</label>
                <input type="password" id="reg-password" placeholder="Create a password (min 6 chars)">
                <div id="reg-password-error" class="error">Password must be at least 6 characters</div>
            </div>
            <button id="register-submit" class="btn btn-primary">Create Account</button>
            <button id="register-back" class="btn btn-secondary">Back</button>
        </div>
    </div>
    
    <!-- Login Screen -->
    <div id="login-screen" class="container hidden">
        <div class="logo">Welcome Back</div>
        <div class="card">
            <div class="form-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" placeholder="Enter your email">
                <div id="login-email-error" class="error">Please enter your email</div>
            </div>
            <div class="form-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" placeholder="Enter your password">
                <div id="login-password-error" class="error">Please enter your password</div>
            </div>
            <button id="login-submit" class="btn btn-primary">Login</button>
            <button id="login-back" class="btn btn-secondary">Back</button>
        </div>
    </div>
    
    <!-- Main Screen -->
    <div id="main-screen" class="container hidden">
        <div class="nav">
            <div class="nav-item active" data-tab="account">Account</div>
            <div class="nav-item" data-tab="cards">Cards</div>
            <div class="nav-item" data-tab="transactions">Transactions</div>
        </div>
        
        <!-- Account Tab -->
        <div id="account-tab" class="tab-content">
            <div class="card">
                <div>Your Balance</div>
                <div id="user-balance" class="balance">$0.00</div>
                
                <button id="earn-btn" class="btn btn-primary">Earn Money</button>
                <button id="issue-card-btn" class="btn btn-secondary">Issue New Card</button>
            </div>
        </div>
        
        <!-- Cards Tab -->
        <div id="cards-tab" class="tab-content hidden">
            <div class="card">
                <h3>Your Cards</h3>
                <div id="cards-list">
                    <p>No cards issued yet</p>
                </div>
            </div>
        </div>
        
        <!-- Transactions Tab -->
        <div id="transactions-tab" class="tab-content hidden">
            <div class="card">
                <h3>Transaction History</h3>
                <div id="transaction-history" class="transaction-history">
                    <p>No transactions yet</p>
                </div>
            </div>
        </div>
        
        <button id="logout-btn" class="btn btn-secondary logout-btn">Logout</button>
    </div>
    
    <!-- Issue Card Screen -->
    <div id="issue-card-screen" class="container hidden">
        <div class="logo">Issue New Card</div>
        <div class="card">
            <div class="form-group">
                <label for="card-name">Name on Card</label>
                <input type="text" id="card-name" placeholder="Your name">
                <div id="card-name-error" class="error">Please enter card name</div>
            </div>
            <div class="form-group">
                <label for="card-address">Address</label>
                <input type="text" id="card-address" placeholder="Your address">
                <div id="card-address-error" class="error">Please enter address</div>
            </div>
            <div class="form-group">
                <label for="card-type">Card Type</label>
                <select id="card-type">
                    <option value="debit">Debit Card</option>
                    <option value="virtual">Virtual Card</option>
                </select>
            </div>
            <button id="card-submit" class="btn btn-primary">Confirm</button>
            <button id="card-back" class="btn btn-secondary">Back</button>
        </div>
    </div>
    
    <!-- Earn Modal -->
    <div id="earn-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="earn-amount">You earned $0!</h2>
            <p id="earn-message">Keep using Lingoung Bank for more rewards!</p>
            <button id="earn-close" class="btn btn-primary" style="margin-top: 20px;">Close</button>
        </div>
    </div>
    
    <!-- Card Issued Modal -->
    <div id="card-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Card Issued Successfully!</h2>
            <p id="card-details"></p>
            <button id="card-modal-close" class="btn btn-primary" style="margin-top: 20px;">Great!</button>
        </div>
    </div>
    
    <script>
        // App State
        const state = {
            currentUser: null,
            balance: 0,
            cards: [],
            transactions: []
        };

        // DOM Elements
        const screens = {
            welcome: document.getElementById('welcome-screen'),
            register: document.getElementById('register-screen'),
            login: document.getElementById('login-screen'),
            main: document.getElementById('main-screen'),
            issueCard: document.getElementById('issue-card-screen')
        };

        const tabs = {
            account: document.getElementById('account-tab'),
            cards: document.getElementById('cards-tab'),
            transactions: document.getElementById('transactions-tab')
        };

        const navItems = document.querySelectorAll('.nav-item');

        // Initialize the app
        function initApp() {
            // Load from localStorage if available
            const savedState = localStorage.getItem('lingoungBankState');
            if (savedState) {
                Object.assign(state, JSON.parse(savedState));
            }

            // Setup event listeners
            setupEventListeners();
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('lingoungBankState', JSON.stringify(state));
        }

        // Setup all event listeners
        function setupEventListeners() {
            // Navigation buttons
            document.getElementById('register-btn').addEventListener('click', showRegisterScreen);
            document.getElementById('login-btn').addEventListener('click', showLoginScreen);
            document.getElementById('register-back').addEventListener('click', showWelcomeScreen);
            document.getElementById('login-back').addEventListener('click', showWelcomeScreen);
            document.getElementById('card-back').addEventListener('click', showMainScreen);
            document.getElementById('logout-btn').addEventListener('click', logout);

            // Form submissions
            document.getElementById('register-submit').addEventListener('click', registerUser);
            document.getElementById('login-submit').addEventListener('click', loginUser);
            document.getElementById('card-submit').addEventListener('click', issueCard);

            // Main screen buttons
            document.getElementById('earn-btn').addEventListener('click', earnMoney);
            document.getElementById('issue-card-btn').addEventListener('click', showIssueCardScreen);
            document.getElementById('earn-close').addEventListener('click', closeEarnModal);
            document.getElementById('card-modal-close').addEventListener('click', closeCardModal);

            // Tab navigation
            navItems.forEach(item => {
                item.addEventListener('click', () => switchTab(item.dataset.tab));
            });

            // Input validation
            setupInputValidation();
        }

        // Setup input validation
        function setupInputValidation() {
            // Registration validation
            document.getElementById('reg-name').addEventListener('input', validateName);
            document.getElementById('reg-email').addEventListener('input', validateEmail);
            document.getElementById('reg-password').addEventListener('input', validatePassword);

            // Login validation
            document.getElementById('login-email').addEventListener('input', validateLoginEmail);
            document.getElementById('login-password').addEventListener('input', validateLoginPassword);

            // Card validation
            document.getElementById('card-name').addEventListener('input', validateCardName);
            document.getElementById('card-address').addEventListener('input', validateCardAddress);
        }

        // Validation functions
        function validateName() {
            const name = document.getElementById('reg-name').value.trim();
            const error = document.getElementById('reg-name-error');
            if (name.length < 2) {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validateEmail() {
            const email = document.getElementById('reg-email').value.trim();
            const error = document.getElementById('reg-email-error');
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!re.test(email)) {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validatePassword() {
            const password = document.getElementById('reg-password').value;
            const error = document.getElementById('reg-password-error');
            if (password.length < 6) {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validateLoginEmail() {
            const email = document.getElementById('login-email').value.trim();
            const error = document.getElementById('login-email-error');
            if (email === '') {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validateLoginPassword() {
            const password = document.getElementById('login-password').value;
            const error = document.getElementById('login-password-error');
            if (password === '') {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validateCardName() {
            const name = document.getElementById('card-name').value.trim();
            const error = document.getElementById('card-name-error');
            if (name.length < 2) {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        function validateCardAddress() {
            const address = document.getElementById('card-address').value.trim();
            const error = document.getElementById('card-address-error');
            if (address.length < 5) {
                error.style.display = 'block';
                return false;
            }
            error.style.display = 'none';
            return true;
        }

        // Screen navigation functions
        function showWelcomeScreen() {
            hideAllScreens();
            screens.welcome.classList.remove('hidden');
        }

        function showRegisterScreen() {
            hideAllScreens();
            screens.register.classList.remove('hidden');
        }

        function showLoginScreen() {
            hideAllScreens();
            screens.login.classList.remove('hidden');
        }

        function showMainScreen() {
            hideAllScreens();
            screens.main.classList.remove('hidden');
            updateUI();
        }

        function showIssueCardScreen() {
            hideAllScreens();
            screens.issueCard.classList.remove('hidden');
        }

        function hideAllScreens() {
            for (const screen in screens) {
                screens[screen].classList.add('hidden');
            }
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            for (const tab in tabs) {
                tabs[tab].classList.add('hidden');
            }

            // Show selected tab
            tabs[tabName].classList.remove('hidden');

            // Update nav items
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });

            // Update specific tab content if needed
            if (tabName === 'cards') {
                updateCardsList();
            } else if (tabName === 'transactions') {
                updateTransactionsList();
            }
        }

        // User functions
        function registerUser() {
            if (!validateName() || !validateEmail() || !validatePassword()) {
                return;
            }

            const name = document.getElementById('reg-name').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const password = document.getElementById('reg-password').value;

            state.currentUser = {
                name,
                email,
                password
            };

            state.balance = 0;
            state.cards = [];
            state.transactions = [];

            saveState();
            showMainScreen();
        }

        function loginUser() {
            if (!validateLoginEmail() || !validateLoginPassword()) {
                return;
            }

            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;

            // In a real app, you would check against stored users
            // For demo, we'll just check if there's a registered user
            if (state.currentUser && state.currentUser.email === email && state.currentUser.password === password) {
                showMainScreen();
            } else {
                alert('Invalid email or password. For demo purposes, you can register first.');
            }
        }

        function logout() {
            state.currentUser = null;
            showWelcomeScreen();
        }

        // Card functions
        function issueCard() {
            if (!validateCardName() || !validateCardAddress()) {
                return;
            }

            const name = document.getElementById('card-name').value.trim();
            const address = document.getElementById('card-address').value.trim();
            const type = document.getElementById('card-type').value;

            const card = {
                id: Date.now().toString(),
                name,
                address,
                type,
                number: generateCardNumber(),
                expiry: generateExpiryDate(),
                cvv: Math.floor(100 + Math.random() * 900).toString()
            };

            state.cards.push(card);
            saveState();

            // Show card details in modal
            document.getElementById('card-details').innerHTML = `
                <p><strong>Card Type:</strong> ${type === 'debit' ? 'Debit Card' : 'Virtual Card'}</p>
                <p><strong>Card Number:</strong> ${formatCardNumber(card.number)}</p>
                <p><strong>Expiry Date:</strong> ${card.expiry}</p>
                <p><strong>CVV:</strong> ${card.cvv}</p>
            `;

            // Show modal
            document.getElementById('card-modal').classList.remove('hidden');
        }

        function generateCardNumber() {
            let number = '';
            for (let i = 0; i < 16; i++) {
                number += Math.floor(Math.random() * 10).toString();
            }
            return number;
        }

        function formatCardNumber(number) {
            return number.replace(/(\d{4})/g, '$1 ').trim();
        }

        function generateExpiryDate() {
            const now = new Date();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const year = (now.getFullYear() + 3).toString().slice(-2);
            return `${month}/${year}`;
        }

        function closeCardModal() {
            document.getElementById('card-modal').classList.add('hidden');
            showMainScreen();
        }

        // Money functions
        function earnMoney() {
            const amount = Math.floor(Math.random() * 41) + 10; // Random $10-$50
            state.balance += amount;
            
            // Add transaction
            state.transactions.unshift({
                id: Date.now().toString(),
                type: 'credit',
                amount,
                description: 'Earn reward',
                date: new Date().toLocaleString()
            });

            saveState();
            
            // Update UI
            document.getElementById('earn-amount').textContent = `You earned $${amount}!`;
            document.getElementById('earn-message').textContent = getRandomEarnMessage();
            document.getElementById('earn-modal').classList.remove('hidden');
            
            updateUI();
        }

        function getRandomEarnMessage() {
            const messages = [
                "Great job! Keep using Lingoung Bank!",
                "Your balance is growing!",
                "Come back tomorrow for more rewards!",
                "You're on a roll!",
                "Lingoung Bank appreciates your loyalty!"
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }

        function closeEarnModal() {
            document.getElementById('earn-modal').classList.add('hidden');
        }

        // UI Update functions
        function updateUI() {
            if (!state.currentUser) return;

            // Update balance
            document.getElementById('user-balance').textContent = `$${state.balance.toFixed(2)}`;

            // Update cards and transactions if on those tabs
            const activeTab = document.querySelector('.nav-item.active').dataset.tab;
            if (activeTab === 'cards') {
                updateCardsList();
            } else if (activeTab === 'transactions') {
                updateTransactionsList();
            }
        }

        function updateCardsList() {
            const cardsList = document.getElementById('cards-list');
            
            if (state.cards.length === 0) {
                cardsList.innerHTML = '<p>No cards issued yet</p>';
                return;
            }

            cardsList.innerHTML = state.cards.map(card => `
                <div class="card-item" style="margin-bottom: 15px; padding: 15px; background: #222; border-radius: 8px;">
                    <p><strong>${card.type === 'debit' ? 'Debit Card' : 'Virtual Card'}</strong></p>
                    <p>•••• •••• •••• ${card.number.slice(-4)}</p>
                    <p>Exp: ${card.expiry} | CVV: •••</p>
                </div>
            `).join('');
        }

        function updateTransactionsList() {
            const transactionsList = document.getElementById('transaction-history');
            
            if (state.transactions.length === 0) {
                transactionsList.innerHTML = '<p>No transactions yet</p>';
                return;
            }

            transactionsList.innerHTML = state.transactions.map(trans => `
                <div class="transaction">
                    <div>
                        <div>${trans.description}</div>
                        <div style="font-size: 12px; color: #888;">${trans.date}</div>
                    </div>
                    <div class="transaction-amount ${trans.type === 'credit' ? 'positive' : 'negative'}">
                        ${trans.type === 'credit' ? '+' : '-'}$${trans.amount.toFixed(2)}
                    </div>
                </div>
            `).join('');
        }

        // Initialize the app when loaded
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>